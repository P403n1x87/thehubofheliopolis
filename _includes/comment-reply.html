{% assign comments = site.data.comments | sort %}
{% assign cnt = 0 %}
{% for comment in comments %}
  {% assign data = comment[1] %}

  {% if data.pic == page.pic and data.parent == include.parent %}
    {% assign cnt = cnt | plus:1 %}
    {% break %}
  {% endif %}
{% endfor %}

{% if cnt > 0 %}
  <div class="comment-replies">
    <ul class="comment-replies">
      {% for comment in comments %}
        {% assign data = comment[1] %}

        {% if data.pic == page.pic and data.parent == include.parent %}
          {% assign cnt = cnt | plus:1 %}
          <li>
            <div class="comment-container">
              <img src="https://www.gravatar.com/avatar/{{ data.email }}" class="gravatar small"/>

              <div class="comment-reply">
                <div class="comment-info">
                  <i class="fa fa-pencil" aria-hidden="true"></i> <span>{{ data.name }}</span> <i class="fa fa-calendar" aria-hidden="true"></i> <span>{{ data.timestamp | date: "%a, %b %d, %Y @ %H:%M" }}</span>
                </div>
                <div class="comment-text">{{ data.comment | markdownify }}</div>
                <div>
                  <span class="action" onclick="reply('{{ comment[1].name }}', {{ comment[1].timestamp }})">REPLY</span>
                </div>
                {% include comment-reply.html parent=data.timestamp %}
              </div>
            </div>
          </li>
        {% endif %}
      {% endfor %}
    </ul>
  </div>
{% endif %}
